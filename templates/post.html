<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok | Create Post | {{current_user.username}}</title>
    <link rel="icon" type="image/x-icon" href="">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.1/min/dropzone.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.1.js"
        integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
</head>
<style>
    .image-upload>input {
        display: none;
    }
</style>
<style>
    .bottom {
        width: 100%;
        height: 42px;
        background-color: rgb(0, 0, 0);
        position: fixed;
        bottom: 0;
        display: none;
    }

    .bottom ul li {
        position: absolute;
        left: 50%;
        bottom: 10%;
        transform: translate(-50%, 50%);
        transition: all .5s;
    }

    .bottom ul li:nth-child(1) {
        left: 10%;
        padding: 17px;
        font-size: 15px;
    }

    .bottom ul li:nth-child(2) {
        left: 27%;
        padding: 17px 19px;
        font-size: 15px;
    }

    .bottom ul li:nth-child(3) {
        left: 50%;
        padding: 17px 19px 45px;
        font-size: 30px;
    }

    .bottom ul li:nth-child(4) {
        left: 74%;
        padding: 17px 19px;
        font-size: 15px;
    }

    .bottom ul li:nth-child(5) {
        left: 90%;
        padding: 17px 19px;
        font-size: 15px;
    }

    @media(max-width:528px) {
        .bottom {
            display: block;
        }
    }
</style>

<body>
    {% if current_user.is_authenticated %}
    <div style="text-align: center;">
        <form method="POST" action="/tiktok/post" enctype="multipart/form-data" class="container">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            {% for message in get_flashed_messages() %}
            <div style="background-color: black;">
                <text style="color: white;">{{message}}</text>
            </div>
            {% endfor %}
            <legend style="font-size:30px; color: black;">Create Post</legend><br><br>
            <textarea name="content" id="" cols="20" rows="10" class="form-control"></textarea>
            <br>
            <label class="form-label">Choose video:</label>
            <label for="file-upload" class="custom-file-upload">
                <span class="material-icons" style="font-size: 50px;">videocam</span>
            </label>
            <input id="file-upload" accept=".mp4" name="post_vid" type="file" style="display: none;"><br>
            <small style="color: red;">*Video size limit is 16mb.</small><br><br>
            <button type="submit" class="btn btn-primary">Post</button>
        </form>
    </div>
    {% else %}
    <h1>You need to sign in to create posts.</h1>
    <a href="{{url_for ('login')}}">Sign in here</a> or <a href="{{url_for ('sign_up')}}">Sign up</a> in just seconds if
    you don't have an account!
    {% endif %}
    <div class="bottom"><br><br><br><br>
        <ul class="bottomUl" style="list-style: none;">
            <li>
                <pre><a href="/"><i class="material-icons" style="font-size: 20px; color: aliceblue;">home</i></a><p style="font-size: 9px; color: aliceblue;">Home</p></pre>
            </li>
            <li>
                <pre><a href="#"><i class="material-icons" style="font-size: 20px; color: aliceblue;">search</i></a><p style="font-size: 9px; color: aliceblue;">Search</p></pre>
            </li>
            <li><a href="/tiktok/post"><i class="material-icons"
                        style="font-size: 40px; color: aliceblue;">add_to_queue</i></a></li>
            <li>
                <pre><a href="#"><i class="material-icons" style="font-size: 20px; color: aliceblue;">chat</i></a><p style="font-size: 9px; color: aliceblue;">Inbox</p></pre>
            </li>
            <li>
                <pre><a href="/tiktok/profile"><i class="material-icons" style="font-size: 20px; color: aliceblue;">person</i></a><p style="font-size: 9px; text-align: center; color: aliceblue;">Me</p></pre>
            </li>
        </ul>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.1/min/dropzone.min.js"></script>
    <script>
        $('#file-upload').change(function () {
            var i = $(this).prev('label').clone();
            var file = $('#file-upload')[0].files[0].name;
            $(this).prev('label').text(file);
        });
    </script>
</body>

</html>